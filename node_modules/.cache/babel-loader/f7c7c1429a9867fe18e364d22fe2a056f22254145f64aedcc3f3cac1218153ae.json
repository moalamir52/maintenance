{"ast":null,"code":"var _jsxFileName = \"C:\\\\project\\\\maintenance\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\n// MaintenanceEditor with robust date parsing\n\nimport { useState, useEffect, useRef } from \"react\";\nimport * as XLSX from \"xlsx\";\nimport { differenceInDays, parse } from \"date-fns\";\nimport PropTypes from \"prop-types\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CLIENT_ID = \"412097983726-bs860lb09slcgtiuoetqvoq54jtqn1h1.apps.googleusercontent.com\";\nconst SCOPES = \"https://www.googleapis.com/auth/spreadsheets\";\nconst SPREADSHEET_ID = \"1v4rQWn6dYPVQPd-PkhvrDNgKVnexilrR2XIUVa5RKEM\";\nconst SHEET_NAME = \"Sheet1\";\nfunction btnStyle(color) {\n  return {\n    background: color,\n    color: \"white\",\n    padding: \"6px 10px\",\n    fontSize: \"13px\",\n    borderRadius: 8,\n    border: \"none\",\n    fontWeight: \"bold\"\n  };\n}\nfunction normalizePlate(plate) {\n  return (plate === null || plate === void 0 ? void 0 : plate.trim().toLowerCase().replace(/\\s+/g, \"\")) || \"\";\n}\nasync function updateSheetCell(spreadsheetId, range, value) {\n  const accessToken = window.gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token;\n  await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/${range}?valueInputOption=USER_ENTERED`, {\n    method: \"PUT\",\n    headers: {\n      \"Authorization\": `Bearer ${accessToken}`,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      values: [[value]]\n    })\n  });\n}\n\n// دالة لتصفية الأعمدة التي بها بيانات فقط\nfunction filterColumnsWithData(rows) {\n  if (!rows.length) return rows;\n  const keys = Object.keys(rows[0]);\n  // استثني Index وDays Delayed من الفحص\n  const dataKeys = keys.filter(k => k !== \"Index\" && k !== \"Days Delayed\");\n  const columnsWithData = dataKeys.filter(key => rows.some(row => row[key] && row[key].toString().trim() !== \"\"));\n  return rows.map(row => {\n    const filtered = {\n      Index: row.Index\n    };\n    columnsWithData.forEach(key => {\n      filtered[key] = row[key];\n    });\n    filtered[\"Days Delayed\"] = row[\"Days Delayed\"];\n    return filtered;\n  });\n}\nexport default function MaintenanceEditor() {\n  _s();\n  const [data, setData] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [modifiedData, setModifiedData] = useState([]);\n  const [editCell, setEditCell] = useState(null);\n  const [selectedRowIndex, setSelectedRowIndex] = useState(null);\n  const [filterMode, setFilterMode] = useState(\"all\");\n  const [duplicatePlates, setDuplicatePlates] = useState({});\n  const [invygoPlates, setInvygoPlates] = useState([]);\n  const [duplicateRows, setDuplicateRows] = useState({});\n  const tableRef = useRef(null);\n  const [loading, setLoading] = useState(true);\n  const [sheetError, setSheetError] = useState(null);\n  const [gapiLoaded, setGapiLoaded] = useState(false);\n  const [isSignedIn, setIsSignedIn] = useState(false);\n  const [googleUser, setGoogleUser] = useState(null);\n  const [gapiError, setGapiError] = useState(null);\n  useEffect(() => {\n    const fetchInvygoPlates = async () => {\n      const response = await fetch(\"https://docs.google.com/spreadsheets/d/1sHvEQMtt3suuxuMA0zhcXk5TYGqZzit0JvGLk1CQ0LI/export?format=csv&gid=1812913588\");\n      const text = await response.text();\n      const rows = text.split(\"\\n\").map(r => r.split(\",\"));\n      const plates = rows.slice(1).map(r => {\n        var _r$;\n        return (_r$ = r[0]) === null || _r$ === void 0 ? void 0 : _r$.trim().replace(/\\s+/g, \"\").toLowerCase();\n      }).filter(Boolean);\n      setInvygoPlates(plates);\n    };\n    fetchInvygoPlates();\n  }, []);\n  useEffect(() => {\n    setLoading(true);\n    setSheetError(null);\n    const fetchSheet = async () => {\n      try {\n        const response = await fetch(\"https://docs.google.com/spreadsheets/d/1v4rQWn6dYPVQPd-PkhvrDNgKVnexilrR2XIUVa5RKEM/export?format=csv&gid=0\");\n        const text = await response.text();\n        const rows = text.split(\"\\n\").map(r => r.split(\",\"));\n        const headers = rows[0];\n        const parsed = rows.slice(1).map(r => Object.fromEntries(r.map((v, i) => [headers[i], v])));\n        setData(parsed);\n        setModifiedData(parsed);\n      } catch (err) {\n        setSheetError(\"حدث خطأ أثناء تحميل البيانات!\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchSheet();\n  }, []);\n  useEffect(() => {\n    const counts = {};\n    const rowMap = {};\n    modifiedData.forEach((row, idx) => {\n      var _row$dateInKey;\n      const plate = normalizePlate(row[\"Vehicle\"]);\n      const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n      const hasDateIn = dateInKey && ((_row$dateInKey = row[dateInKey]) === null || _row$dateInKey === void 0 ? void 0 : _row$dateInKey.trim()) !== \"\";\n      if (plate && !hasDateIn) {\n        counts[plate] = (counts[plate] || 0) + 1;\n        rowMap[plate] = rowMap[plate] || [];\n        rowMap[plate].push(idx + 1);\n      }\n    });\n    setDuplicatePlates(Object.fromEntries(Object.entries(counts).filter(([_, c]) => c > 1)));\n    setDuplicateRows(rowMap);\n  }, [modifiedData]);\n  const today = new Date();\n  const parseDate = str => {\n    if (!str || typeof str !== \"string\") return new Date(\"Invalid\");\n    const formats = [\"dd/MM/yyyy\", \"d-M-yyyy\", \"dd-MM-yyyy\", \"yyyy-MM-dd\"];\n    for (const format of formats) {\n      const parsed = parse(str, format, new Date());\n      if (!isNaN(parsed)) return parsed;\n    }\n    const fallback = new Date(str);\n    return isNaN(fallback) ? new Date(\"Invalid\") : fallback;\n  };\n  function getDisplayRows(rows) {\n    return rows.map((row, i) => {\n      const dateOutKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date out\"));\n      const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n      const dateOutStr = dateOutKey && row[dateOutKey];\n      const dateInStr = dateInKey && row[dateInKey];\n      let daysPassed = \"\";\n      let showDelay = false;\n      if (dateOutStr && (!dateInStr || dateInStr.trim() === \"\")) {\n        const dateOut = parseDate(dateOutStr);\n        if (!isNaN(dateOut)) {\n          var _row$damageKey;\n          const days = differenceInDays(new Date(), dateOut);\n          const damageKey = Object.keys(row).find(k => k.toLowerCase().includes(\"damag\"));\n          const damage = damageKey && ((_row$damageKey = row[damageKey]) === null || _row$damageKey === void 0 ? void 0 : _row$damageKey.toLowerCase());\n          // استثناء total loss\n          if (damage !== null && damage !== void 0 && damage.includes(\"total loss\")) {\n            daysPassed = \"\";\n          } else {\n            // حساب كل المدد المطلوبة\n            let requiredDays = [];\n            if (damage !== null && damage !== void 0 && damage.includes(\"oil\")) requiredDays.push(3);\n            if (damage !== null && damage !== void 0 && damage.includes(\"accident\")) requiredDays.push(30);\n            if (!(damage !== null && damage !== void 0 && damage.includes(\"oil\")) && !(damage !== null && damage !== void 0 && damage.includes(\"accident\"))) requiredDays.push(3);\n            // استخدم المدة الأكبر\n            const maxRequired = requiredDays.length ? Math.max(...requiredDays) : 3;\n            if (days > maxRequired) daysPassed = days;else daysPassed = \"\";\n          }\n        }\n      }\n      return {\n        Index: i + 1,\n        ...row,\n        \"Days Delayed\": daysPassed\n      };\n    });\n  }\n  const getDelayedCars = rows => {\n    return rows.filter(row => {\n      var _row$damageKey2, _row$dateOutKey, _row$dateInKey2;\n      const damageKey = Object.keys(row).find(k => k.toLowerCase().includes(\"damag\"));\n      const dateOutKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date out\"));\n      const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n      const damage = damageKey && ((_row$damageKey2 = row[damageKey]) === null || _row$damageKey2 === void 0 ? void 0 : _row$damageKey2.toLowerCase());\n      const dateOutStr = dateOutKey && ((_row$dateOutKey = row[dateOutKey]) === null || _row$dateOutKey === void 0 ? void 0 : _row$dateOutKey.trim());\n      const dateIn = dateInKey && ((_row$dateInKey2 = row[dateInKey]) === null || _row$dateInKey2 === void 0 ? void 0 : _row$dateInKey2.trim());\n      if (!dateOutStr || dateIn) return false;\n      const dateOut = parseDate(dateOutStr);\n      if (isNaN(dateOut)) return false;\n      const daysPassed = differenceInDays(today, dateOut);\n      if (damage !== null && damage !== void 0 && damage.includes(\"oil\") && daysPassed > 3) return true;\n      if (damage !== null && damage !== void 0 && damage.includes(\"accident\") && daysPassed > 30) return true;\n      if (!(damage !== null && damage !== void 0 && damage.includes(\"oil\")) && !(damage !== null && damage !== void 0 && damage.includes(\"accident\")) && daysPassed > 3) return true;\n      return false;\n    });\n  };\n  let filtered = [];\n  if (filterMode === \"delayed\") {\n    const delayedRows = getDisplayRows(modifiedData).filter(row => row[\"Days Delayed\"] !== \"\");\n    filtered = delayedRows.map((row, i) => ({\n      ...row,\n      Index: i + 1\n    }));\n  } else {\n    // فلترة حسب الفلتر المختار\n    const baseRows = modifiedData.filter(row => {\n      var _row$Vehicle, _row$damageKey3, _row$dateInKey3;\n      const vehicle = (_row$Vehicle = row[\"Vehicle\"]) === null || _row$Vehicle === void 0 ? void 0 : _row$Vehicle.trim();\n      if (!vehicle || vehicle === \"#N/A\" || vehicle === \"\") return false;\n      const matchesSearch = Object.values(row).some(v => v.toLowerCase().includes(search.toLowerCase()));\n      const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n      const damageKey = Object.keys(row).find(k => k.toLowerCase().includes(\"damag\"));\n      const damageText = damageKey && ((_row$damageKey3 = row[damageKey]) === null || _row$damageKey3 === void 0 ? void 0 : _row$damageKey3.toLowerCase());\n      const hasDate = dateInKey && ((_row$dateInKey3 = row[dateInKey]) === null || _row$dateInKey3 === void 0 ? void 0 : _row$dateInKey3.trim()) !== \"\";\n      const plate = normalizePlate(row[\"Vehicle\"]);\n      if (filterMode === \"accident\") return matchesSearch && (damageText === null || damageText === void 0 ? void 0 : damageText.includes(\"accident\")) && !hasDate;\n      if (filterMode === \"invygo\") return matchesSearch && plate && invygoPlates.includes(plate) && !hasDate;\n      if (filterMode === \"ready\") return matchesSearch && hasDate;\n      if (filterMode === \"notready\") return matchesSearch && !hasDate;\n      if (filterMode === \"duplicates\") {\n        var _row$dateInKey4;\n        if (!plate || !duplicatePlates[plate]) return false;\n        const dateIn = dateInKey && ((_row$dateInKey4 = row[dateInKey]) === null || _row$dateInKey4 === void 0 ? void 0 : _row$dateInKey4.trim());\n        return !dateIn;\n      }\n      return matchesSearch;\n    });\n    // أعد الترقيم بعد الفلترة\n    filtered = getDisplayRows(baseRows).map((row, i) => ({\n      ...row,\n      Index: i + 1\n    }));\n  }\n\n  // دالة توليد الملاحظة لكل صف\n  function getNote(row, rowIndex = 0) {\n    const plate = normalizePlate(row[\"Vehicle\"]);\n    const carType = invygoPlates.includes(plate) ? \"Invygo\" : \"Yelo\";\n    let status = \"\";\n    if (row[\"Days Delayed\"]) status = \"Delayed\";else {\n      var _row$damageKey4, _row$dateInKey5;\n      const damageKey = Object.keys(row).find(k => k.toLowerCase().includes(\"damag\"));\n      const damageText = damageKey && ((_row$damageKey4 = row[damageKey]) === null || _row$damageKey4 === void 0 ? void 0 : _row$damageKey4.toLowerCase());\n      const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n      const hasDate = dateInKey && ((_row$dateInKey5 = row[dateInKey]) === null || _row$dateInKey5 === void 0 ? void 0 : _row$dateInKey5.trim()) !== \"\";\n      if (damageText !== null && damageText !== void 0 && damageText.includes(\"accident\")) status = \"Accident\";else if (hasDate) status = \"Repaired\";else status = \"Not Repaired\";\n    }\n    if (plate && duplicatePlates[plate]) {\n      const rows = duplicateRows[plate] || [];\n      const others = rows.filter(n => n !== rowIndex + 1);\n      if (others.length > 0) {\n        status += `, Duplicate with rows: ${others.join(\", \")}`;\n      }\n    }\n    return `${carType} ${status}`;\n  }\n\n  // دوال التصدير\n  const exportToExcel = () => {\n    let fileName = \"Maintenance\";\n    if (search.trim() !== \"\") {\n      fileName = \"search\";\n    } else if (filterMode === \"delayed\") fileName = \"Delayed\";else if (filterMode === \"duplicates\") fileName = \"Duplicates\";else if (filterMode === \"accident\") fileName = \"Accident\";else if (filterMode === \"invygo\") fileName = \"Invygo\";else if (filterMode === \"notready\") fileName = \"NotReady\";else if (filterMode === \"ready\") fileName = \"Ready\";\n    // أضف عمود Notes لكل صف\n    const exportRows = filterColumnsWithData(filtered.map((row, i) => ({\n      ...row,\n      Notes: getNote(row, i)\n    })));\n    const ws = XLSX.utils.json_to_sheet(exportRows);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, fileName);\n    XLSX.writeFile(wb, `${fileName}_${new Date().toISOString().slice(0, 10)}.xlsx`);\n  };\n  const getRowStyle = row => {\n    var _row$dateInKey6, _row$damageKey5;\n    if (row[\"Days Delayed\"]) return {\n      backgroundColor: \"#ff7043\",\n      color: \"#fff\"\n    };\n    const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n    const damageKey = Object.keys(row).find(k => k.toLowerCase().includes(\"damag\"));\n    const dateIn = dateInKey && ((_row$dateInKey6 = row[dateInKey]) === null || _row$dateInKey6 === void 0 ? void 0 : _row$dateInKey6.trim());\n    const damageText = damageKey && ((_row$damageKey5 = row[damageKey]) === null || _row$damageKey5 === void 0 ? void 0 : _row$damageKey5.toLowerCase());\n    const plate = normalizePlate(row[\"Vehicle\"]);\n    const isInvygo = invygoPlates.includes(plate);\n    const isAccident = (damageText === null || damageText === void 0 ? void 0 : damageText.includes(\"accident\")) && !dateIn;\n    const isReady = Boolean(dateIn);\n    if (plate && duplicatePlates[plate]) return {\n      backgroundColor: \"#e53935\",\n      color: \"#fff\"\n    };\n    if (isInvygo && isReady) return {\n      backgroundColor: \"#bbdefb\"\n    };\n    if (isInvygo && !isReady) return {\n      backgroundColor: \"#fff\",\n      border: \"1px solid #ccc\",\n      color: \"#6a1b9a\"\n    };\n    if (!isInvygo && isReady) return {\n      backgroundColor: \"#c8e6c9\"\n    };\n    if (isAccident) return {\n      backgroundColor: \"#ffcdd2\"\n    };\n    if (!isInvygo && !isReady) return {\n      backgroundColor: \"#fff9c4\",\n      color: \"#6a1b9a\"\n    };\n    return {};\n  };\n  const handleEdit = async (rowIndex, key, value) => {\n    setModifiedData(prev => {\n      const updated = [...prev];\n      updated[rowIndex] = {\n        ...updated[rowIndex],\n        [key]: value\n      };\n      return updated;\n    });\n    if (!isSignedIn) return;\n    try {\n      const colIndex = Object.keys(modifiedData[0]).indexOf(key);\n      const colLetter = String.fromCharCode(65 + colIndex); // A, B, C, ...\n      const sheetRow = rowIndex + 2; // +2 لأن أول صف هو العناوين\n      const range = `${SHEET_NAME}!${colLetter}${sheetRow}`;\n      await updateSheetCell(SPREADSHEET_ID, range, value);\n    } catch (err) {\n      setGapiError(\"Failed to update Google Sheet. Please try again.\");\n      console.error(\"updateSheetCell error\", err);\n    }\n  };\n  const handleKeyDown = (e, rowIndex, colIndex) => {\n    const rowCount = filtered.length;\n    const colCount = Object.keys(filtered[0] || {}).length;\n    let nextRow = rowIndex;\n    let nextCol = colIndex;\n    if (e.key === \"ArrowRight\" && colIndex < colCount - 1) nextCol++;\n    if (e.key === \"ArrowLeft\" && colIndex > 0) nextCol--;\n    if (e.key === \"ArrowUp\" && rowIndex > 0) nextRow--;\n    if (e.key === \"ArrowDown\" && rowIndex < rowCount - 1) nextRow++;\n    if ([\"ArrowRight\", \"ArrowLeft\", \"ArrowUp\", \"ArrowDown\"].includes(e.key)) {\n      var _tableRef$current;\n      e.preventDefault();\n      const next = (_tableRef$current = tableRef.current) === null || _tableRef$current === void 0 ? void 0 : _tableRef$current.querySelector(`input[data-row='${nextRow}'][data-col='${nextCol}']`);\n      if (next) next.focus();\n    }\n    if (e.key === \"Enter\") e.target.blur();\n  };\n  const accidentCount = modifiedData.filter(row => {\n    var _row$damageKey6, _row$dateInKey7;\n    const damageKey = Object.keys(row).find(k => k.toLowerCase().includes(\"damag\"));\n    const damageText = damageKey && ((_row$damageKey6 = row[damageKey]) === null || _row$damageKey6 === void 0 ? void 0 : _row$damageKey6.toLowerCase());\n    const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n    const hasDate = dateInKey && ((_row$dateInKey7 = row[dateInKey]) === null || _row$dateInKey7 === void 0 ? void 0 : _row$dateInKey7.trim()) !== \"\";\n    return (damageText === null || damageText === void 0 ? void 0 : damageText.includes(\"accident\")) && !hasDate;\n  }).length;\n  const invygoCount = modifiedData.filter(row => {\n    var _row$dateInKey8;\n    const plate = normalizePlate(row[\"Vehicle\"]);\n    const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n    const hasDate = dateInKey && ((_row$dateInKey8 = row[dateInKey]) === null || _row$dateInKey8 === void 0 ? void 0 : _row$dateInKey8.trim()) !== \"\";\n    return plate && invygoPlates.includes(plate) && !hasDate;\n  }).length;\n  const notReadyCount = modifiedData.filter(row => {\n    var _row$dateInKey9;\n    const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n    return dateInKey && ((_row$dateInKey9 = row[dateInKey]) === null || _row$dateInKey9 === void 0 ? void 0 : _row$dateInKey9.trim()) === \"\";\n  }).length;\n  const duplicatesCount = Object.values(duplicatePlates).reduce((a, b) => a + b, 0);\n  const delayedCount = getDisplayRows(modifiedData).filter(row => row[\"Days Delayed\"] !== \"\").length;\n  const resetData = () => {\n    if (window.confirm(\"Are you sure you want to reset all changes?\")) {\n      setModifiedData(data);\n      setSearch(\"\");\n      setFilterMode(\"all\");\n      setSelectedRowIndex(null);\n    }\n  };\n\n  // تحميل gapi وتهيئة OAuth مع معالجة الأخطاء\n  useEffect(() => {\n    const waitForGapi = () => {\n      if (window.gapi) {\n        window.gapi.load(\"client:auth2\", async () => {\n          try {\n            await window.gapi.client.init({\n              clientId: CLIENT_ID,\n              scope: SCOPES\n            });\n            setGapiLoaded(true);\n            setGapiError(null);\n            const auth = window.gapi.auth2.getAuthInstance();\n            setIsSignedIn(auth.isSignedIn.get());\n            if (auth.isSignedIn.get()) setGoogleUser(auth.currentUser.get());\n            auth.isSignedIn.listen(val => {\n              setIsSignedIn(val);\n              setGoogleUser(val ? auth.currentUser.get() : null);\n            });\n          } catch (err) {\n            setGapiError(\"\");\n            console.error(\"gapi init error\", err);\n          }\n        });\n      } else {\n        setTimeout(waitForGapi, 300);\n      }\n    };\n    waitForGapi();\n  }, []);\n  const handleSignIn = () => {\n    window.gapi.auth2.getAuthInstance().signIn().catch(err => {\n      setGapiError(\"Google Sign-in failed. Please try again.\");\n      console.error(\"Google SignIn error\", err);\n    });\n  };\n  const handleSignOut = () => {\n    window.gapi.auth2.getAuthInstance().signOut();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 10,\n      fontFamily: \"Segoe UI\",\n      maxWidth: 1200,\n      margin: \"auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"https://moalamir52.github.io/Yelo/\",\n      style: {\n        position: \"absolute\",\n        top: 20,\n        left: 20,\n        backgroundColor: \"#ffd600\",\n        color: \"#6a1b9a\",\n        padding: \"10px 20px\",\n        textDecoration: \"none\",\n        fontWeight: \"bold\",\n        borderRadius: \"8px\",\n        border: \"2px solid #6a1b9a\",\n        fontSize: 28\n      },\n      \"aria-label\": \"\\u0631\\u062C\\u0648\\u0639\",\n      children: \"\\uD83D\\uDD19\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 20,\n        fontFamily: \"Segoe UI\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-title-box\",\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          marginBottom: 18\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: \"#ffd600\",\n            border: \"2px solid #7c4dff\",\n            borderRadius: 16,\n            boxShadow: \"0 6px 24px rgba(106,27,154,0.7)\",\n            padding: \"18px 36px\",\n            minWidth: 220,\n            textAlign: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"main-title\",\n            style: {\n              margin: 0,\n              color: \"#6a1b9a\",\n              fontWeight: 900,\n              fontSize: 28,\n              letterSpacing: 1\n            },\n            children: \"\\uD83D\\uDEE0 Maintenance \\uD83D\\uDEE0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FilterButtons, {\n        filterMode: filterMode,\n        setFilterMode: setFilterMode,\n        accidentCount: accidentCount,\n        invygoCount: invygoCount,\n        notReadyCount: notReadyCount,\n        duplicatesCount: duplicatesCount,\n        delayedCount: delayedCount,\n        modifiedData: modifiedData,\n        search: search,\n        setSearch: setSearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ExportButtons, {\n        exportToExcel: exportToExcel,\n        resetData: resetData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\",\n        marginBottom: 10,\n        color: \"#555\"\n      },\n      children: [\"\\u2705 Showing \", filtered.length, \" result(s)\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 7\n    }, this), filtered.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\",\n        marginBottom: 10,\n        color: \"red\",\n        fontWeight: \"bold\"\n      },\n      children: [\"\\uD83D\\uDEA8 There are \", filtered.length, \" delayed cars in the Showroom!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(MaintenanceTable, {\n      filtered: filtered,\n      getRowStyle: getRowStyle,\n      selectedRowIndex: selectedRowIndex,\n      setSelectedRowIndex: setSelectedRowIndex,\n      handleEdit: handleEdit,\n      handleKeyDown: handleKeyDown,\n      duplicatePlates: duplicatePlates,\n      duplicateRows: duplicateRows,\n      getDisplayRows: getDisplayRows,\n      invygoPlates: invygoPlates,\n      search: search\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        :root {\n          --main-purple: #6a1b9a;\n          --main-yellow: #ffd600;\n          --main-green: #4caf50;\n          --main-orange: #ff9800;\n          --main-red: #f44336;\n          --main-blue: #1976d2;\n          --main-pink: #9c27b0;\n        }\n        tr:hover {\n          background: #f3e5f5 !important;\n          color: #222 !important;\n        }\n        @media (max-width: 900px) {\n          table { min-width: 600px !important; }\n          input { font-size: 12px; }\n          .main-title-box h2 { font-size: 22px !important; }\n        }\n        @media (max-width: 600px) {\n          .main-title-box > div {\n            padding: 10px 8px !important;\n            min-width: 120px !important;\n          }\n          .main-title-box h2 {\n            font-size: 16px !important;\n            padding: 0 !important;\n          }\n          .filter-btns-row {\n            flex-direction: column !important;\n            gap: 6px !important;\n            align-items: stretch !important;\n          }\n          table { min-width: 400px !important; }\n          input { font-size: 11px; }\n        }\n        @media (max-width: 400px) {\n          .main-title-box > div {\n            padding: 6px 2px !important;\n            min-width: 80px !important;\n          }\n          .main-title-box h2 {\n            font-size: 12px !important;\n          }\n          .filter-btns-row button, .filter-btns-row input {\n            font-size: 11px !important;\n            padding: 4px 4px !important;\n          }\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        margin: '40px 0',\n        fontSize: 22,\n        color: 'var(--main-purple)'\n      },\n      \"aria-label\": \"Loading data\",\n      children: \"\\u23F3 Loading data...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 512,\n      columnNumber: 19\n    }, this), sheetError && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'red',\n        textAlign: 'center',\n        margin: '20px 0'\n      },\n      children: sheetError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 513,\n      columnNumber: 22\n    }, this), !loading && !sheetError && filtered.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        margin: '40px 0',\n        fontSize: 20,\n        color: '#888'\n      },\n      children: \"No results match your search or filter.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 515,\n      columnNumber: 9\n    }, this), !isSignedIn && gapiLoaded && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\",\n        margin: \"20px 0\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSignIn,\n        style: {\n          ...btnStyle(\"#1976d2\"),\n          fontSize: 18,\n          padding: \"10px 24px\"\n        },\n        children: \"Sign in with Google\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 9\n    }, this), gapiError && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: \"red\",\n        textAlign: \"center\",\n        margin: \"10px 0\",\n        fontWeight: \"bold\"\n      },\n      children: gapiError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 9\n    }, this), isSignedIn && googleUser && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\",\n        marginBottom: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Welcome, \", googleUser.getBasicProfile().getEmail()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSignOut,\n        style: {\n          ...btnStyle(\"#757575\"),\n          marginLeft: 12\n        },\n        children: \"Sign out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 527,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 400,\n    columnNumber: 5\n  }, this);\n}\n_s(MaintenanceEditor, \"WvB3kLg9xSKfNF/7KKWp011hvU0=\");\n_c = MaintenanceEditor;\nMaintenanceEditor.propTypes = {};\n\n// زر البحث في سطر منفصل ومنسق\nfunction FilterButtons({\n  filterMode,\n  setFilterMode,\n  accidentCount,\n  invygoCount,\n  notReadyCount,\n  duplicatesCount,\n  delayedCount,\n  modifiedData,\n  search,\n  setSearch\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginBottom: 18\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-btns-row\",\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        gap: 10,\n        flexWrap: \"wrap\",\n        marginBottom: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": \"Accident filter\",\n        onClick: () => setFilterMode(\"accident\"),\n        style: btnStyle(\"#ff9800\"),\n        children: [\"\\uD83D\\uDE97 Car Accident (\", accidentCount, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": \"Invygo filter\",\n        onClick: () => setFilterMode(\"invygo\"),\n        style: btnStyle(\"#4caf50\"),\n        children: [\"\\uD83D\\uDCE6 Invygo Cars (\", invygoCount, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": \"Not Ready filter\",\n        onClick: () => setFilterMode(\"notready\"),\n        style: btnStyle(\"#f44336\"),\n        children: [\"\\u274C Not Ready (\", notReadyCount, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": \"Duplicates filter\",\n        onClick: () => setFilterMode(\"duplicates\"),\n        style: btnStyle(\"#9c27b0\"),\n        children: [\"\\uD83D\\uDED1 Duplicates (\", duplicatesCount, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": \"Delayed filter\",\n        onClick: () => setFilterMode(\"delayed\"),\n        style: btnStyle(\"#ff7043\"),\n        children: [\"\\u23F1 Show Delayed (\", delayedCount, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": \"Show all\",\n        onClick: () => setFilterMode(\"all\"),\n        style: btnStyle(\"#1976d2\"),\n        children: [\"\\uD83D\\uDD04 Show All (\", modifiedData.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 548,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        marginBottom: 6\n      },\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        \"aria-label\": \"Search\",\n        type: \"text\",\n        placeholder: \"\\uD83D\\uDD0D Search...\",\n        value: search,\n        onChange: e => setSearch(e.target.value),\n        style: {\n          padding: 12,\n          minWidth: 260,\n          borderRadius: 16,\n          border: \"2px solid #7c4dff\",\n          fontSize: 17,\n          boxShadow: \"0 2px 8px #e1bee7\",\n          outline: \"none\",\n          textAlign: \"center\",\n          background: \"#fafafa\",\n          transition: \"border 0.2s, box-shadow 0.2s\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 541,\n    columnNumber: 5\n  }, this);\n}\n_c2 = FilterButtons;\nFilterButtons.propTypes = {\n  filterMode: PropTypes.string.isRequired,\n  setFilterMode: PropTypes.func.isRequired,\n  accidentCount: PropTypes.number.isRequired,\n  invygoCount: PropTypes.number.isRequired,\n  notReadyCount: PropTypes.number.isRequired,\n  duplicatesCount: PropTypes.number.isRequired,\n  delayedCount: PropTypes.number.isRequired,\n  modifiedData: PropTypes.array.isRequired,\n  search: PropTypes.string.isRequired,\n  setSearch: PropTypes.func.isRequired\n};\n\n// زر التصدير اسمه Export فقط\nfunction ExportButtons({\n  exportToExcel,\n  resetData\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      flexWrap: \"wrap\",\n      gap: 8,\n      justifyContent: \"center\",\n      marginBottom: 10\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      \"aria-label\": \"Export all\",\n      onClick: exportToExcel,\n      style: btnStyle(\"#388e3c\"),\n      children: \"\\uD83D\\uDCE4 Export\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      \"aria-label\": \"Reset\",\n      onClick: resetData,\n      style: btnStyle(\"#757575\"),\n      children: \"\\u21A9\\uFE0F Reset\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 590,\n    columnNumber: 5\n  }, this);\n}\n_c3 = ExportButtons;\nExportButtons.propTypes = {\n  exportToExcel: PropTypes.func.isRequired,\n  resetData: PropTypes.func.isRequired\n};\n\n// جدول العرض\nfunction MaintenanceTable({\n  filtered,\n  getRowStyle,\n  selectedRowIndex,\n  setSelectedRowIndex,\n  handleEdit,\n  handleKeyDown,\n  duplicatePlates,\n  duplicateRows,\n  getDisplayRows,\n  invygoPlates,\n  search\n}) {\n  const tableRows = filterColumnsWithData(getDisplayRows(filtered));\n  const columns = tableRows.length > 0 ? Object.keys(tableRows[0]) : [];\n  const tableDivStyle = search && search.trim() !== \"\" ? {\n    overflowX: \"auto\",\n    maxHeight: \"70vh\",\n    minHeight: \"120px\"\n  } : {\n    overflowX: \"auto\",\n    height: \"100vh\",\n    minHeight: \"100vh\"\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: tableDivStyle,\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      \"aria-label\": \"\\u062C\\u062F\\u0648\\u0644 \\u0627\\u0644\\u0635\\u064A\\u0627\\u0646\\u0629\",\n      style: {\n        borderCollapse: \"collapse\",\n        width: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        style: {\n          position: \"sticky\",\n          top: 0,\n          background: \"#ffd600\",\n          color: \"#6a1b9a\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [columns.map(key => /*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              border: \"1px solid #ccc\",\n              padding: 8,\n              textAlign: \"center\"\n            },\n            children: key\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 614,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              border: \"1px solid #ccc\",\n              padding: 8,\n              textAlign: \"center\"\n            },\n            children: \"Notes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 616,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: tableRows.map((row, rowIndex) => {\n          const plate = normalizePlate(row[\"Vehicle\"]);\n          let note = \"\";\n          let carType = invygoPlates.includes(normalizePlate(row[\"Vehicle\"])) ? \"Invygo\" : \"Yelo\";\n          let status = \"\";\n          if (row[\"Days Delayed\"]) status = \"Delayed\";else {\n            var _row$damageKey7, _row$dateInKey0;\n            const damageKey = Object.keys(row).find(k => k.toLowerCase().includes(\"damag\"));\n            const damageText = damageKey && ((_row$damageKey7 = row[damageKey]) === null || _row$damageKey7 === void 0 ? void 0 : _row$damageKey7.toLowerCase());\n            const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n            const hasDate = dateInKey && ((_row$dateInKey0 = row[dateInKey]) === null || _row$dateInKey0 === void 0 ? void 0 : _row$dateInKey0.trim()) !== \"\";\n            if (damageText !== null && damageText !== void 0 && damageText.includes(\"accident\")) status = \"Accident\";else if (hasDate) status = \"Repaired\";else status = \"Not Repaired\";\n          }\n          if (plate && duplicatePlates[plate]) {\n            const rows = duplicateRows[plate] || [];\n            const others = rows.filter(n => n !== rowIndex + 1);\n            if (others.length > 0) {\n              status += `, Duplicate with rows: ${others.join(\", \")}`;\n            }\n          }\n          note = `${carType} ${status}`;\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            style: {\n              ...getRowStyle(row),\n              backgroundColor: selectedRowIndex === rowIndex ? \"#c5cae9\" : getRowStyle(row).backgroundColor\n            },\n            children: [columns.map((key, colIndex) => /*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                border: \"1px solid #ddd\",\n                padding: 6,\n                textAlign: \"center\"\n              },\n              children: row[key]\n            }, colIndex, false, {\n              fileName: _jsxFileName,\n              lineNumber: 646,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                border: \"1px solid #ccc\",\n                padding: 6,\n                color: \"#6a1b9a\",\n                fontWeight: \"bold\",\n                fontSize: 13,\n                textAlign: \"center\",\n                whiteSpace: 'nowrap',\n                overflow: 'hidden',\n                textOverflow: 'ellipsis'\n              },\n              children: note\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 650,\n              columnNumber: 17\n            }, this)]\n          }, rowIndex, true, {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 610,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 609,\n    columnNumber: 5\n  }, this);\n}\n_c4 = MaintenanceTable;\nMaintenanceTable.propTypes = {\n  filtered: PropTypes.array.isRequired,\n  getRowStyle: PropTypes.func.isRequired,\n  selectedRowIndex: PropTypes.number,\n  setSelectedRowIndex: PropTypes.func.isRequired,\n  handleEdit: PropTypes.func.isRequired,\n  handleKeyDown: PropTypes.func.isRequired,\n  duplicatePlates: PropTypes.object.isRequired,\n  duplicateRows: PropTypes.object.isRequired,\n  getDisplayRows: PropTypes.func.isRequired,\n  invygoPlates: PropTypes.array.isRequired,\n  search: PropTypes.string.isRequired\n};\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"MaintenanceEditor\");\n$RefreshReg$(_c2, \"FilterButtons\");\n$RefreshReg$(_c3, \"ExportButtons\");\n$RefreshReg$(_c4, \"MaintenanceTable\");","map":{"version":3,"names":["useState","useEffect","useRef","XLSX","differenceInDays","parse","PropTypes","jsxDEV","_jsxDEV","CLIENT_ID","SCOPES","SPREADSHEET_ID","SHEET_NAME","btnStyle","color","background","padding","fontSize","borderRadius","border","fontWeight","normalizePlate","plate","trim","toLowerCase","replace","updateSheetCell","spreadsheetId","range","value","accessToken","window","gapi","auth2","getAuthInstance","currentUser","get","getAuthResponse","access_token","fetch","method","headers","body","JSON","stringify","values","filterColumnsWithData","rows","length","keys","Object","dataKeys","filter","k","columnsWithData","key","some","row","toString","map","filtered","Index","forEach","MaintenanceEditor","_s","data","setData","search","setSearch","modifiedData","setModifiedData","editCell","setEditCell","selectedRowIndex","setSelectedRowIndex","filterMode","setFilterMode","duplicatePlates","setDuplicatePlates","invygoPlates","setInvygoPlates","duplicateRows","setDuplicateRows","tableRef","loading","setLoading","sheetError","setSheetError","gapiLoaded","setGapiLoaded","isSignedIn","setIsSignedIn","googleUser","setGoogleUser","gapiError","setGapiError","fetchInvygoPlates","response","text","split","r","plates","slice","_r$","Boolean","fetchSheet","parsed","fromEntries","v","i","err","counts","rowMap","idx","_row$dateInKey","dateInKey","find","includes","hasDateIn","push","entries","_","c","today","Date","parseDate","str","formats","format","isNaN","fallback","getDisplayRows","dateOutKey","dateOutStr","dateInStr","daysPassed","showDelay","dateOut","_row$damageKey","days","damageKey","damage","requiredDays","maxRequired","Math","max","getDelayedCars","_row$damageKey2","_row$dateOutKey","_row$dateInKey2","dateIn","delayedRows","baseRows","_row$Vehicle","_row$damageKey3","_row$dateInKey3","vehicle","matchesSearch","damageText","hasDate","_row$dateInKey4","getNote","rowIndex","carType","status","_row$damageKey4","_row$dateInKey5","others","n","join","exportToExcel","fileName","exportRows","Notes","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","toISOString","getRowStyle","_row$dateInKey6","_row$damageKey5","backgroundColor","isInvygo","isAccident","isReady","handleEdit","prev","updated","colIndex","indexOf","colLetter","String","fromCharCode","sheetRow","console","error","handleKeyDown","e","rowCount","colCount","nextRow","nextCol","_tableRef$current","preventDefault","next","current","querySelector","focus","target","blur","accidentCount","_row$damageKey6","_row$dateInKey7","invygoCount","_row$dateInKey8","notReadyCount","_row$dateInKey9","duplicatesCount","reduce","a","b","delayedCount","resetData","confirm","waitForGapi","load","client","init","clientId","scope","auth","listen","val","setTimeout","handleSignIn","signIn","catch","handleSignOut","signOut","style","fontFamily","maxWidth","margin","children","href","position","top","left","textDecoration","_jsxFileName","lineNumber","columnNumber","className","display","justifyContent","marginBottom","boxShadow","minWidth","textAlign","letterSpacing","FilterButtons","ExportButtons","MaintenanceTable","onClick","getBasicProfile","getEmail","marginLeft","_c","propTypes","gap","flexWrap","type","placeholder","onChange","outline","transition","_c2","string","isRequired","func","number","array","_c3","tableRows","columns","tableDivStyle","overflowX","maxHeight","minHeight","height","borderCollapse","width","note","_row$damageKey7","_row$dateInKey0","whiteSpace","overflow","textOverflow","_c4","object","$RefreshReg$"],"sources":["C:/project/maintenance/src/App.jsx"],"sourcesContent":["// MaintenanceEditor with robust date parsing\n\nimport { useState, useEffect, useRef } from \"react\";\nimport * as XLSX from \"xlsx\";\nimport { differenceInDays, parse } from \"date-fns\";\nimport PropTypes from \"prop-types\";\n\nconst CLIENT_ID = \"412097983726-bs860lb09slcgtiuoetqvoq54jtqn1h1.apps.googleusercontent.com\";\nconst SCOPES = \"https://www.googleapis.com/auth/spreadsheets\";\nconst SPREADSHEET_ID = \"1v4rQWn6dYPVQPd-PkhvrDNgKVnexilrR2XIUVa5RKEM\";\nconst SHEET_NAME = \"Sheet1\";\n\nfunction btnStyle(color) {\n  return { background: color, color: \"white\", padding: \"6px 10px\", fontSize: \"13px\", borderRadius: 8, border: \"none\", fontWeight: \"bold\" };\n}\n\nfunction normalizePlate(plate) {\n  return plate?.trim().toLowerCase().replace(/\\s+/g, \"\") || \"\";\n}\n\nasync function updateSheetCell(spreadsheetId, range, value) {\n  const accessToken = window.gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token;\n  await fetch(\n    `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/${range}?valueInputOption=USER_ENTERED`,\n    {\n      method: \"PUT\",\n      headers: {\n        \"Authorization\": `Bearer ${accessToken}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ values: [[value]] }),\n    }\n  );\n}\n\n// دالة لتصفية الأعمدة التي بها بيانات فقط\nfunction filterColumnsWithData(rows) {\n  if (!rows.length) return rows;\n  const keys = Object.keys(rows[0]);\n  // استثني Index وDays Delayed من الفحص\n  const dataKeys = keys.filter(k => k !== \"Index\" && k !== \"Days Delayed\");\n  const columnsWithData = dataKeys.filter(key => rows.some(row => row[key] && row[key].toString().trim() !== \"\"));\n  return rows.map(row => {\n    const filtered = { Index: row.Index };\n    columnsWithData.forEach(key => { filtered[key] = row[key]; });\n    filtered[\"Days Delayed\"] = row[\"Days Delayed\"];\n    return filtered;\n  });\n}\n\nexport default function MaintenanceEditor() {\n  \n  const [data, setData] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [modifiedData, setModifiedData] = useState([]);\n  const [editCell, setEditCell] = useState(null);\n  const [selectedRowIndex, setSelectedRowIndex] = useState(null);\n  const [filterMode, setFilterMode] = useState(\"all\");\n  const [duplicatePlates, setDuplicatePlates] = useState({});\n  const [invygoPlates, setInvygoPlates] = useState([]);\n  const [duplicateRows, setDuplicateRows] = useState({});\n  const tableRef = useRef(null);\n  const [loading, setLoading] = useState(true);\n  const [sheetError, setSheetError] = useState(null);\n  const [gapiLoaded, setGapiLoaded] = useState(false);\n  const [isSignedIn, setIsSignedIn] = useState(false);\n  const [googleUser, setGoogleUser] = useState(null);\n  const [gapiError, setGapiError] = useState(null);\n\n  useEffect(() => {\n    const fetchInvygoPlates = async () => {\n      const response = await fetch(\"https://docs.google.com/spreadsheets/d/1sHvEQMtt3suuxuMA0zhcXk5TYGqZzit0JvGLk1CQ0LI/export?format=csv&gid=1812913588\");\n      const text = await response.text();\n      const rows = text.split(\"\\n\").map(r => r.split(\",\"));\n      const plates = rows.slice(1).map(r => r[0]?.trim().replace(/\\s+/g, \"\").toLowerCase()).filter(Boolean);\n      setInvygoPlates(plates);\n    };\n    fetchInvygoPlates();\n  }, []);\n\n  useEffect(() => {\n    setLoading(true);\n    setSheetError(null);\n    const fetchSheet = async () => {\n      try {\n        const response = await fetch(\"https://docs.google.com/spreadsheets/d/1v4rQWn6dYPVQPd-PkhvrDNgKVnexilrR2XIUVa5RKEM/export?format=csv&gid=0\");\n        const text = await response.text();\n        const rows = text.split(\"\\n\").map(r => r.split(\",\"));\n        const headers = rows[0];\n        const parsed = rows.slice(1).map(r => Object.fromEntries(r.map((v, i) => [headers[i], v])));\n        setData(parsed);\n        setModifiedData(parsed);\n      } catch (err) {\n        setSheetError(\"حدث خطأ أثناء تحميل البيانات!\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchSheet();\n  }, []);\n\n  useEffect(() => {\n    const counts = {};\n    const rowMap = {};\n    modifiedData.forEach((row, idx) => {\n      const plate = normalizePlate(row[\"Vehicle\"]);\n      const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n      const hasDateIn = dateInKey && row[dateInKey]?.trim() !== \"\";\n      if (plate && !hasDateIn) {\n        counts[plate] = (counts[plate] || 0) + 1;\n        rowMap[plate] = rowMap[plate] || [];\n        rowMap[plate].push(idx + 1);\n      }\n    });\n    setDuplicatePlates(Object.fromEntries(Object.entries(counts).filter(([_, c]) => c > 1)));\n    setDuplicateRows(rowMap);\n  }, [modifiedData]);\n\n  const today = new Date();\n\n  const parseDate = (str) => {\n  if (!str || typeof str !== \"string\") return new Date(\"Invalid\");\n  const formats = [\"dd/MM/yyyy\", \"d-M-yyyy\", \"dd-MM-yyyy\", \"yyyy-MM-dd\"];\n  for (const format of formats) {\n    const parsed = parse(str, format, new Date());\n    if (!isNaN(parsed)) return parsed;\n  }\n  const fallback = new Date(str);\n  return isNaN(fallback) ? new Date(\"Invalid\") : fallback;\n};\n\n  function getDisplayRows(rows) {\n    return rows.map((row, i) => {\n      const dateOutKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date out\"));\n      const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n      const dateOutStr = dateOutKey && row[dateOutKey];\n      const dateInStr = dateInKey && row[dateInKey];\n      let daysPassed = \"\";\n      let showDelay = false;\n      if (dateOutStr && (!dateInStr || dateInStr.trim() === \"\")) {\n        const dateOut = parseDate(dateOutStr);\n        if (!isNaN(dateOut)) {\n          const days = differenceInDays(new Date(), dateOut);\n          const damageKey = Object.keys(row).find(k => k.toLowerCase().includes(\"damag\"));\n          const damage = damageKey && row[damageKey]?.toLowerCase();\n          // استثناء total loss\n          if (damage?.includes(\"total loss\")) {\n            daysPassed = \"\";\n          } else {\n            // حساب كل المدد المطلوبة\n            let requiredDays = [];\n            if (damage?.includes(\"oil\")) requiredDays.push(3);\n            if (damage?.includes(\"accident\")) requiredDays.push(30);\n            if (!damage?.includes(\"oil\") && !damage?.includes(\"accident\")) requiredDays.push(3);\n            // استخدم المدة الأكبر\n            const maxRequired = requiredDays.length ? Math.max(...requiredDays) : 3;\n            if (days > maxRequired) daysPassed = days; else daysPassed = \"\";\n          }\n        }\n      }\n      return {\n        Index: i + 1,\n        ...row,\n        \"Days Delayed\": daysPassed\n      };\n    });\n  }\n\n  const getDelayedCars = (rows) => {\n    return rows.filter(row => {\n      const damageKey = Object.keys(row).find(k => k.toLowerCase().includes(\"damag\"));\n      const dateOutKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date out\"));\n      const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n\n      const damage = damageKey && row[damageKey]?.toLowerCase();\n      const dateOutStr = dateOutKey && row[dateOutKey]?.trim();\n      const dateIn = dateInKey && row[dateInKey]?.trim();\n\n      if (!dateOutStr || dateIn) return false;\n\n      const dateOut = parseDate(dateOutStr);\n      if (isNaN(dateOut)) return false;\n\n      const daysPassed = differenceInDays(today, dateOut);\n\n      if (damage?.includes(\"oil\") && daysPassed > 3) return true;\n      if (damage?.includes(\"accident\") && daysPassed > 30) return true;\n      if (!damage?.includes(\"oil\") && !damage?.includes(\"accident\") && daysPassed > 3) return true;\n\n      return false;\n    });\n  };\n\n  let filtered = [];\n  if (filterMode === \"delayed\") {\n    const delayedRows = getDisplayRows(modifiedData).filter(row => row[\"Days Delayed\"] !== \"\");\n    filtered = delayedRows.map((row, i) => ({ ...row, Index: i + 1 }));\n  } else {\n    // فلترة حسب الفلتر المختار\n    const baseRows = modifiedData.filter(row => {\n      const vehicle = row[\"Vehicle\"]?.trim();\n      if (!vehicle || vehicle === \"#N/A\" || vehicle === \"\") return false;\n      const matchesSearch = Object.values(row).some(v => v.toLowerCase().includes(search.toLowerCase()));\n      const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n      const damageKey = Object.keys(row).find(k => k.toLowerCase().includes(\"damag\"));\n      const damageText = damageKey && row[damageKey]?.toLowerCase();\n      const hasDate = dateInKey && row[dateInKey]?.trim() !== \"\";\n      const plate = normalizePlate(row[\"Vehicle\"]);\n      if (filterMode === \"accident\") return matchesSearch && damageText?.includes(\"accident\") && !hasDate;\n      if (filterMode === \"invygo\") return matchesSearch && plate && invygoPlates.includes(plate) && !hasDate;\n      if (filterMode === \"ready\") return matchesSearch && hasDate;\n      if (filterMode === \"notready\") return matchesSearch && !hasDate;\n      if (filterMode === \"duplicates\") {\n        if (!plate || !duplicatePlates[plate]) return false;\n        const dateIn = dateInKey && row[dateInKey]?.trim();\n        return !dateIn;\n      }\n      return matchesSearch;\n    });\n    // أعد الترقيم بعد الفلترة\n    filtered = getDisplayRows(baseRows).map((row, i) => ({ ...row, Index: i + 1 }));\n  }\n\n  // دالة توليد الملاحظة لكل صف\n  function getNote(row, rowIndex = 0) {\n    const plate = normalizePlate(row[\"Vehicle\"]);\n    const carType = invygoPlates.includes(plate) ? \"Invygo\" : \"Yelo\";\n    let status = \"\";\n    if (row[\"Days Delayed\"]) status = \"Delayed\";\n    else {\n      const damageKey = Object.keys(row).find(k => k.toLowerCase().includes(\"damag\"));\n      const damageText = damageKey && row[damageKey]?.toLowerCase();\n      const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n      const hasDate = dateInKey && row[dateInKey]?.trim() !== \"\";\n      if (damageText?.includes(\"accident\")) status = \"Accident\";\n      else if (hasDate) status = \"Repaired\";\n      else status = \"Not Repaired\";\n    }\n    if (plate && duplicatePlates[plate]) {\n      const rows = duplicateRows[plate] || [];\n      const others = rows.filter(n => n !== rowIndex + 1);\n      if (others.length > 0) {\n        status += `, Duplicate with rows: ${others.join(\", \")}`;\n      }\n    }\n    return `${carType} ${status}`;\n  }\n\n  // دوال التصدير\n  const exportToExcel = () => {\n    let fileName = \"Maintenance\";\n    if (search.trim() !== \"\") {\n      fileName = \"search\";\n    } else if (filterMode === \"delayed\") fileName = \"Delayed\";\n    else if (filterMode === \"duplicates\") fileName = \"Duplicates\";\n    else if (filterMode === \"accident\") fileName = \"Accident\";\n    else if (filterMode === \"invygo\") fileName = \"Invygo\";\n    else if (filterMode === \"notready\") fileName = \"NotReady\";\n    else if (filterMode === \"ready\") fileName = \"Ready\";\n    // أضف عمود Notes لكل صف\n    const exportRows = filterColumnsWithData(filtered.map((row, i) => ({ ...row, Notes: getNote(row, i) })));\n    const ws = XLSX.utils.json_to_sheet(exportRows);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, fileName);\n    XLSX.writeFile(wb, `${fileName}_${new Date().toISOString().slice(0, 10)}.xlsx`);\n  };\n\n  const getRowStyle = (row) => {\n    if (row[\"Days Delayed\"]) return { backgroundColor: \"#ff7043\", color: \"#fff\" };\n    const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n    const damageKey = Object.keys(row).find(k => k.toLowerCase().includes(\"damag\"));\n    const dateIn = dateInKey && row[dateInKey]?.trim();\n    const damageText = damageKey && row[damageKey]?.toLowerCase();\n    const plate = normalizePlate(row[\"Vehicle\"]);\n\n    const isInvygo = invygoPlates.includes(plate);\n    const isAccident = damageText?.includes(\"accident\") && !dateIn;\n    const isReady = Boolean(dateIn);\n\n    if (plate && duplicatePlates[plate]) return { backgroundColor: \"#e53935\", color: \"#fff\" };\n    if (isInvygo && isReady) return { backgroundColor: \"#bbdefb\" };\n    if (isInvygo && !isReady) return { backgroundColor: \"#fff\", border: \"1px solid #ccc\", color: \"#6a1b9a\" };\n    if (!isInvygo && isReady) return { backgroundColor: \"#c8e6c9\" };\n    if (isAccident) return { backgroundColor: \"#ffcdd2\" };\n    if (!isInvygo && !isReady) return { backgroundColor: \"#fff9c4\", color: \"#6a1b9a\" };\n    return {};\n  };\n\n  const handleEdit = async (rowIndex, key, value) => {\n    setModifiedData((prev) => {\n      const updated = [...prev];\n      updated[rowIndex] = { ...updated[rowIndex], [key]: value };\n      return updated;\n    });\n    if (!isSignedIn) return;\n    try {\n      const colIndex = Object.keys(modifiedData[0]).indexOf(key);\n      const colLetter = String.fromCharCode(65 + colIndex); // A, B, C, ...\n      const sheetRow = rowIndex + 2; // +2 لأن أول صف هو العناوين\n      const range = `${SHEET_NAME}!${colLetter}${sheetRow}`;\n      await updateSheetCell(SPREADSHEET_ID, range, value);\n    } catch (err) {\n      setGapiError(\"Failed to update Google Sheet. Please try again.\");\n      console.error(\"updateSheetCell error\", err);\n    }\n  };\n\n  const handleKeyDown = (e, rowIndex, colIndex) => {\n    const rowCount = filtered.length;\n    const colCount = Object.keys(filtered[0] || {}).length;\n    let nextRow = rowIndex;\n    let nextCol = colIndex;\n    if (e.key === \"ArrowRight\" && colIndex < colCount - 1) nextCol++;\n    if (e.key === \"ArrowLeft\" && colIndex > 0) nextCol--;\n    if (e.key === \"ArrowUp\" && rowIndex > 0) nextRow--;\n    if (e.key === \"ArrowDown\" && rowIndex < rowCount - 1) nextRow++;\n    if ([\"ArrowRight\", \"ArrowLeft\", \"ArrowUp\", \"ArrowDown\"].includes(e.key)) {\n      e.preventDefault();\n      const next = tableRef.current?.querySelector(`input[data-row='${nextRow}'][data-col='${nextCol}']`);\n      if (next) next.focus();\n    }\n    if (e.key === \"Enter\") e.target.blur();\n  };\n\n  const accidentCount = modifiedData.filter(row => {\n    const damageKey = Object.keys(row).find(k => k.toLowerCase().includes(\"damag\"));\n    const damageText = damageKey && row[damageKey]?.toLowerCase();\n    const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n    const hasDate = dateInKey && row[dateInKey]?.trim() !== \"\";\n    return damageText?.includes(\"accident\") && !hasDate;\n  }).length;\n\n  const invygoCount = modifiedData.filter(row => {\n    const plate = normalizePlate(row[\"Vehicle\"]);\n    const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n    const hasDate = dateInKey && row[dateInKey]?.trim() !== \"\";\n    return plate && invygoPlates.includes(plate) && !hasDate;\n  }).length;\n\n  const notReadyCount = modifiedData.filter(row => {\n    const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n    return dateInKey && row[dateInKey]?.trim() === \"\";\n  }).length;\n\n  const duplicatesCount = Object.values(duplicatePlates).reduce((a, b) => a + b, 0);\n  const delayedCount = getDisplayRows(modifiedData).filter(row => row[\"Days Delayed\"] !== \"\").length;\n\n  const resetData = () => {\n    if (window.confirm(\"Are you sure you want to reset all changes?\")) {\n      setModifiedData(data);\n      setSearch(\"\");\n      setFilterMode(\"all\");\n      setSelectedRowIndex(null);\n    }\n  };\n\n  // تحميل gapi وتهيئة OAuth مع معالجة الأخطاء\n  useEffect(() => {\n    const waitForGapi = () => {\n      if (window.gapi) {\n        window.gapi.load(\"client:auth2\", async () => {\n          try {\n            await window.gapi.client.init({\n              clientId: CLIENT_ID,\n              scope: SCOPES,\n            });\n            setGapiLoaded(true);\n            setGapiError(null);\n            const auth = window.gapi.auth2.getAuthInstance();\n            setIsSignedIn(auth.isSignedIn.get());\n            if (auth.isSignedIn.get()) setGoogleUser(auth.currentUser.get());\n            auth.isSignedIn.listen((val) => {\n              setIsSignedIn(val);\n              setGoogleUser(val ? auth.currentUser.get() : null);\n            });\n          } catch (err) {\n            setGapiError(\"\");\n            console.error(\"gapi init error\", err);\n          }\n        });\n      } else {\n        setTimeout(waitForGapi, 300);\n      }\n    };\n    waitForGapi();\n  }, []);\n\n  const handleSignIn = () => {\n    window.gapi.auth2.getAuthInstance().signIn().catch(err => {\n      setGapiError(\"Google Sign-in failed. Please try again.\");\n      console.error(\"Google SignIn error\", err);\n    });\n  };\n\n  const handleSignOut = () => {\n    window.gapi.auth2.getAuthInstance().signOut();\n  };\n\n  return (\n    <div style={{ padding: 10, fontFamily: \"Segoe UI\", maxWidth: 1200, margin: \"auto\" }}>\n      {/* Back to YELO button */}\n      <a\n        href=\"https://moalamir52.github.io/Yelo/\"\n        style={{\n          position: \"absolute\",\n          top: 20,\n          left: 20,\n          backgroundColor: \"#ffd600\",\n          color: \"#6a1b9a\",\n          padding: \"10px 20px\",\n          textDecoration: \"none\",\n          fontWeight: \"bold\",\n          borderRadius: \"8px\",\n          border: \"2px solid #6a1b9a\",\n          fontSize: 28\n        }}\n        aria-label=\"رجوع\"\n      >\n        🔙\n      </a>\n\n      <div style={{ padding: 20, fontFamily: \"Segoe UI\" }}>\n        <div className=\"main-title-box\" style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          marginBottom: 18\n        }}>\n          <div style={{\n            background: \"#ffd600\",\n            border: \"2px solid #7c4dff\",\n            borderRadius: 16,\n            boxShadow: \"0 6px 24px rgba(106,27,154,0.7)\",\n            padding: \"18px 36px\",\n            minWidth: 220,\n            textAlign: \"center\"\n          }}>\n            <h2 className=\"main-title\" style={{\n              margin: 0,\n              color: \"#6a1b9a\",\n              fontWeight: 900,\n              fontSize: 28,\n              letterSpacing: 1\n            }}>\n              🛠 Maintenance 🛠\n            </h2>\n          </div>\n        </div>\n\n        <FilterButtons filterMode={filterMode} setFilterMode={setFilterMode} accidentCount={accidentCount} invygoCount={invygoCount} notReadyCount={notReadyCount} duplicatesCount={duplicatesCount} delayedCount={delayedCount} modifiedData={modifiedData} search={search} setSearch={setSearch} />\n        <ExportButtons exportToExcel={exportToExcel} resetData={resetData} />\n      </div>\n\n      <div style={{ textAlign: \"center\", marginBottom: 10, color: \"#555\" }}>✅ Showing {filtered.length} result(s)</div>\n\n      {filtered.length > 0 && (\n        <div style={{ textAlign: \"center\", marginBottom: 10, color: \"red\", fontWeight: \"bold\" }}>\n          🚨 There are {filtered.length} delayed cars in the Showroom!\n        </div>\n      )}\n\n      <MaintenanceTable filtered={filtered} getRowStyle={getRowStyle} selectedRowIndex={selectedRowIndex} setSelectedRowIndex={setSelectedRowIndex} handleEdit={handleEdit} handleKeyDown={handleKeyDown} duplicatePlates={duplicatePlates} duplicateRows={duplicateRows} getDisplayRows={getDisplayRows} invygoPlates={invygoPlates} search={search} />\n      <style>{`\n        :root {\n          --main-purple: #6a1b9a;\n          --main-yellow: #ffd600;\n          --main-green: #4caf50;\n          --main-orange: #ff9800;\n          --main-red: #f44336;\n          --main-blue: #1976d2;\n          --main-pink: #9c27b0;\n        }\n        tr:hover {\n          background: #f3e5f5 !important;\n          color: #222 !important;\n        }\n        @media (max-width: 900px) {\n          table { min-width: 600px !important; }\n          input { font-size: 12px; }\n          .main-title-box h2 { font-size: 22px !important; }\n        }\n        @media (max-width: 600px) {\n          .main-title-box > div {\n            padding: 10px 8px !important;\n            min-width: 120px !important;\n          }\n          .main-title-box h2 {\n            font-size: 16px !important;\n            padding: 0 !important;\n          }\n          .filter-btns-row {\n            flex-direction: column !important;\n            gap: 6px !important;\n            align-items: stretch !important;\n          }\n          table { min-width: 400px !important; }\n          input { font-size: 11px; }\n        }\n        @media (max-width: 400px) {\n          .main-title-box > div {\n            padding: 6px 2px !important;\n            min-width: 80px !important;\n          }\n          .main-title-box h2 {\n            font-size: 12px !important;\n          }\n          .filter-btns-row button, .filter-btns-row input {\n            font-size: 11px !important;\n            padding: 4px 4px !important;\n          }\n        }\n      `}</style>\n      {loading && <div style={{textAlign:'center',margin:'40px 0',fontSize:22,color:'var(--main-purple)'}} aria-label=\"Loading data\">⏳ Loading data...</div>}\n      {sheetError && <div style={{color:'red',textAlign:'center',margin:'20px 0'}}>{sheetError}</div>}\n      {!loading && !sheetError && filtered.length === 0 && (\n        <div style={{textAlign:'center',margin:'40px 0',fontSize:20,color:'#888'}}>No results match your search or filter.</div>\n      )}\n\n      {!isSignedIn && gapiLoaded && (\n        <div style={{ textAlign: \"center\", margin: \"20px 0\" }}>\n          <button onClick={handleSignIn} style={{ ...btnStyle(\"#1976d2\"), fontSize: 18, padding: \"10px 24px\" }}>Sign in with Google</button>\n        </div>\n      )}\n      {gapiError && (\n        <div style={{ color: \"red\", textAlign: \"center\", margin: \"10px 0\", fontWeight: \"bold\" }}>{gapiError}</div>\n      )}\n      {isSignedIn && googleUser && (\n        <div style={{ textAlign: \"center\", marginBottom: 10 }}>\n          <span>Welcome, {googleUser.getBasicProfile().getEmail()}</span>\n          <button onClick={handleSignOut} style={{ ...btnStyle(\"#757575\"), marginLeft: 12 }}>Sign out</button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nMaintenanceEditor.propTypes = {};\n\n// زر البحث في سطر منفصل ومنسق\nfunction FilterButtons({ filterMode, setFilterMode, accidentCount, invygoCount, notReadyCount, duplicatesCount, delayedCount, modifiedData, search, setSearch }) {\n  return (\n    <div style={{ marginBottom: 18 }}>\n      <div className=\"filter-btns-row\" style={{ display: \"flex\", justifyContent: \"center\", gap: 10, flexWrap: \"wrap\", marginBottom: 10 }}>\n        <button aria-label=\"Accident filter\" onClick={() => setFilterMode(\"accident\")} style={btnStyle(\"#ff9800\")}>🚗 Car Accident ({accidentCount})</button>\n        <button aria-label=\"Invygo filter\" onClick={() => setFilterMode(\"invygo\")} style={btnStyle(\"#4caf50\")}>📦 Invygo Cars ({invygoCount})</button>\n        <button aria-label=\"Not Ready filter\" onClick={() => setFilterMode(\"notready\")} style={btnStyle(\"#f44336\")}>❌ Not Ready ({notReadyCount})</button>\n        <button aria-label=\"Duplicates filter\" onClick={() => setFilterMode(\"duplicates\")} style={btnStyle(\"#9c27b0\")}>🛑 Duplicates ({duplicatesCount})</button>\n        <button aria-label=\"Delayed filter\" onClick={() => setFilterMode(\"delayed\")} style={btnStyle(\"#ff7043\")}>⏱ Show Delayed ({delayedCount})</button>\n        <button aria-label=\"Show all\" onClick={() => setFilterMode(\"all\")} style={btnStyle(\"#1976d2\")}>🔄 Show All ({modifiedData.length})</button>\n      </div>\n      <div style={{ display: \"flex\", justifyContent: \"center\", marginBottom: 6 }}>\n        <input\n          aria-label=\"Search\"\n          type=\"text\"\n          placeholder=\"🔍 Search...\"\n          value={search}\n          onChange={(e) => setSearch(e.target.value)}\n          style={{\n            padding: 12,\n            minWidth: 260,\n            borderRadius: 16,\n            border: \"2px solid #7c4dff\",\n            fontSize: 17,\n            boxShadow: \"0 2px 8px #e1bee7\",\n            outline: \"none\",\n            textAlign: \"center\",\n            background: \"#fafafa\",\n            transition: \"border 0.2s, box-shadow 0.2s\"\n          }}\n        />\n      </div>\n    </div>\n  );\n}\nFilterButtons.propTypes = {\n  filterMode: PropTypes.string.isRequired,\n  setFilterMode: PropTypes.func.isRequired,\n  accidentCount: PropTypes.number.isRequired,\n  invygoCount: PropTypes.number.isRequired,\n  notReadyCount: PropTypes.number.isRequired,\n  duplicatesCount: PropTypes.number.isRequired,\n  delayedCount: PropTypes.number.isRequired,\n  modifiedData: PropTypes.array.isRequired,\n  search: PropTypes.string.isRequired,\n  setSearch: PropTypes.func.isRequired\n};\n\n// زر التصدير اسمه Export فقط\nfunction ExportButtons({ exportToExcel, resetData }) {\n  return (\n    <div style={{ display: \"flex\", flexWrap: \"wrap\", gap: 8, justifyContent: \"center\", marginBottom: 10 }}>\n      <button aria-label=\"Export all\" onClick={exportToExcel} style={btnStyle(\"#388e3c\")}>📤 Export</button>\n      <button aria-label=\"Reset\" onClick={resetData} style={btnStyle(\"#757575\")}>↩️ Reset</button>\n    </div>\n  );\n}\nExportButtons.propTypes = {\n  exportToExcel: PropTypes.func.isRequired,\n  resetData: PropTypes.func.isRequired\n};\n\n// جدول العرض\nfunction MaintenanceTable({ filtered, getRowStyle, selectedRowIndex, setSelectedRowIndex, handleEdit, handleKeyDown, duplicatePlates, duplicateRows, getDisplayRows, invygoPlates, search }) {\n  const tableRows = filterColumnsWithData(getDisplayRows(filtered));\n  const columns = tableRows.length > 0 ? Object.keys(tableRows[0]) : [];\n  const tableDivStyle = search && search.trim() !== \"\"\n    ? { overflowX: \"auto\", maxHeight: \"70vh\", minHeight: \"120px\" }\n    : { overflowX: \"auto\", height: \"100vh\", minHeight: \"100vh\" };\n  return (\n    <div style={tableDivStyle}>\n      <table aria-label=\"جدول الصيانة\" style={{ borderCollapse: \"collapse\", width: \"100%\" }}>\n        <thead style={{ position: \"sticky\", top: 0, background: \"#ffd600\", color: \"#6a1b9a\" }}>\n          <tr>\n            {columns.map((key) => (\n              <th key={key} style={{ border: \"1px solid #ccc\", padding: 8, textAlign: \"center\" }}>{key}</th>\n            ))}\n            <th style={{ border: \"1px solid #ccc\", padding: 8, textAlign: \"center\" }}>Notes</th>\n          </tr>\n        </thead>\n        <tbody>\n          {tableRows.map((row, rowIndex) => {\n            const plate = normalizePlate(row[\"Vehicle\"]);\n            let note = \"\";\n            let carType = invygoPlates.includes(normalizePlate(row[\"Vehicle\"])) ? \"Invygo\" : \"Yelo\";\n            let status = \"\";\n            if (row[\"Days Delayed\"]) status = \"Delayed\";\n            else {\n              const damageKey = Object.keys(row).find(k => k.toLowerCase().includes(\"damag\"));\n              const damageText = damageKey && row[damageKey]?.toLowerCase();\n              const dateInKey = Object.keys(row).find(k => k.toLowerCase().includes(\"date in\"));\n              const hasDate = dateInKey && row[dateInKey]?.trim() !== \"\";\n              if (damageText?.includes(\"accident\")) status = \"Accident\";\n              else if (hasDate) status = \"Repaired\";\n              else status = \"Not Repaired\";\n            }\n            if (plate && duplicatePlates[plate]) {\n              const rows = duplicateRows[plate] || [];\n              const others = rows.filter(n => n !== rowIndex + 1);\n              if (others.length > 0) {\n                status += `, Duplicate with rows: ${others.join(\", \")}`;\n              }\n            }\n            note = `${carType} ${status}`;\n            return (\n              <tr key={rowIndex} style={{ ...getRowStyle(row), backgroundColor: selectedRowIndex === rowIndex ? \"#c5cae9\" : getRowStyle(row).backgroundColor }}>\n                {columns.map((key, colIndex) => (\n                  <td key={colIndex} style={{ border: \"1px solid #ddd\", padding: 6, textAlign: \"center\" }}>\n                    {row[key]}\n                  </td>\n                ))}\n                <td style={{ border: \"1px solid #ccc\", padding: 6, color: \"#6a1b9a\", fontWeight: \"bold\", fontSize: 13, textAlign: \"center\", whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>{note}</td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\nMaintenanceTable.propTypes = {\n  filtered: PropTypes.array.isRequired,\n  getRowStyle: PropTypes.func.isRequired,\n  selectedRowIndex: PropTypes.number,\n  setSelectedRowIndex: PropTypes.func.isRequired,\n  handleEdit: PropTypes.func.isRequired,\n  handleKeyDown: PropTypes.func.isRequired,\n  duplicatePlates: PropTypes.object.isRequired,\n  duplicateRows: PropTypes.object.isRequired,\n  getDisplayRows: PropTypes.func.isRequired,\n  invygoPlates: PropTypes.array.isRequired,\n  search: PropTypes.string.isRequired\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}